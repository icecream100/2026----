<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åŸºç¡€ç›®å½•ç®¡ç† - é‡‘åç†å·¥ç‰©è”ç½‘å¹³å°</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        .layout-grid {
            display: grid;
            grid-template-columns: 280px 1fr;
            height: calc(100vh - 64px - 48px);
        }

        /* Device Name Override within Table */
        .device-name-cell {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .device-icon {
            color: var(--text-muted);
        }

        /* Source Dot Colors */
        .source-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 6px;
        }

        .source-other {
            background-color: var(--warning);
        }

        .source-manual {
            background-color: var(--success);
        }

        .source-iot {
            background-color: #8b5cf6;
            /* Purple for IoT */
        }
    </style>
</head>

<body>

    <div class="app-container">
        <!-- Sidebar Navigation -->
        <aside class="sidebar">
            <div class="brand">
                <div class="brand-logo"></div>
                <div class="brand-text">ç‰©è”ç½‘å¹³å°</div>
            </div>
            <nav class="nav-menu">
                <div class="nav-group-title">è®¾å¤‡ç©ºé—´ç®¡ç†</div>
                <a href="101_åŸºç¡€è®¾å¤‡ç›®å½•ç®¡ç†.html" class="nav-item active">
                    <span>ğŸ“š</span> åŸºç¡€ç›®å½•
                </a>
                <a href="101_æ ‡ç­¾ç®¡ç†.html" class="nav-item">
                    <span>ğŸ·ï¸</span> æ ‡ç­¾ç®¡ç†
                </a>
                <a href="101_åœ°å›¾å¹¿åœº.html" class="nav-item">
                    <span>ğŸ—ºï¸</span> åœ°å›¾å¹¿åœº
                </a>
                <a href="101_åœ°å›¾ç®¡ç†.html" class="nav-item">
                    <span>âš™ï¸</span> åœ°å›¾é…ç½®
                </a>

                <div class="nav-group-title">è®¾å¤‡æ²»ç†</div>
                <a href="102_æ²»ç†ä»»åŠ¡.html" class="nav-item">
                    <span>ğŸ“‹</span> æ²»ç†ä»»åŠ¡
                </a>
                <a href="102_æ²»ç†å‚æ•°è®¾ç½®.html" class="nav-item">
                    <span>âš™ï¸</span> å‚æ•°è®¾ç½®
                </a>

                <div class="nav-group-title">ç‰©è”ç½‘è®¾å¤‡ç®¡ç†</div>
                <a href="103_å¹³å°è®¾å¤‡ç®¡ç†.html" class="nav-item">
                    <span>ğŸ–¥ï¸</span> å¹³å°ç®¡ç†
                </a>
                <a href="103_å¹³å°é€šé“ç®¡ç†.html" class="nav-item">
                    <span>ğŸ“¡</span> é€šé“ç®¡ç†
                </a>
                <a href="103_è®¾å¤‡åˆ†ç»„ç®¡ç†.html" class="nav-item">
                    <span>ğŸ“‚</span> è®¾å¤‡åˆ†ç»„
                </a>

                <div class="nav-group-title">è§†é¢‘æƒé™ç®¡ç†</div>
                <a href="104_ç›´æ¥å…±äº«.html" class="nav-item">
                    <span>ğŸ“±</span> åº”ç”¨ç®¡ç†
                </a>
                <!-- <span>ğŸ¨</span> åº”ç”¨ç¼–æ’ (Coming Soon) -->
                <a href="104_ä»£ç†å…±äº«.html" class="nav-item">
                    <span>ğŸ”—</span> ä¸Šçº§å¹³å°
                </a>

                <div class="nav-group-title">æƒé™å®¡æ‰¹ç®¡ç†</div>
                <a href="105_éœ€æ±‚ç™»è®°.html" class="nav-item">
                    <span>ğŸ“</span> éœ€æ±‚ç™»è®°
                </a>
                <a href="105_éœ€æ±‚å®¡æ‰¹.html" class="nav-item">
                    <span>âš–ï¸</span> éœ€æ±‚å®¡æ‰¹
                </a>
                <a href="105_æˆæƒç®¡ç†.html" class="nav-item">
                    <span>ğŸ›‘</span> æˆæƒç®¡ç†
                </a>
            </nav>
        </aside>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Top Bar -->
            <header class="top-bar">
                <h2 class="page-title">åŸºç¡€ç›®å½•ç®¡ç†</h2>
                <div class="user-profile">
                    <span>ç®¡ç†å‘˜</span>
                    <div class="avatar"></div>
                </div>
            </header>

            <!-- Page Content -->
            <div class="content-area">
                <div class="layout-grid">
                    <!-- Org Tree -->
                    <div class="tree-panel">
                        <div class="tree-search-box">
                            <input type="text" class="glass-input" placeholder="æœç´¢ç»„ç»‡...">
                            <span class="tree-search-icon">ğŸ”</span>
                        </div>

                        <!-- Static Tree Data -->
                        <div class="tree-content">
                            <div class="tree-node active">
                                <span class="source-dot source-other"></span> ğŸ“‚ é‡‘åç†å·¥å­¦é™¢
                                (120/120)
                            </div>
                            <div class="tree-node">
                                <span class="source-dot source-other"></span> ğŸ“‚ æ•™å­¦æ¥¼AåŒº
                                (45/45)
                                <div class="tree-node">
                                    <span class="source-dot source-other"></span> ğŸ“ ä¸€æ¥¼å¤§å…
                                    (10/10)
                                </div>
                                <div class="tree-node">
                                    <span class="source-dot source-other"></span> ğŸ“ äºŒæ¥¼æ•™å®¤
                                    (35/35)
                                </div>
                            </div>
                            <div class="tree-node">
                                <span class="source-dot source-manual"></span> ğŸ“‚ è¡Œæ”¿æ¥¼
                                (20/20)
                            </div>
                            <div class="tree-node">
                                <span class="source-dot source-iot"></span> ğŸ“‚ ç‰©è”ç½‘è®¾å¤‡ (56/56)
                            </div>
                            <div class="tree-node">
                                <span class="source-dot source-manual"></span> ğŸ“‚ å›¾ä¹¦é¦†
                                (30/30)
                            </div>
                            <div class="tree-node">
                                <span class="source-dot source-manual"></span> ğŸ“‚ ä½“è‚²é¦†
                                (25/25)
                            </div>
                        </div>

                        <div
                            style="padding: 12px; border-top: 1px solid var(--border-color); text-align: center; display: flex; flex-direction: column; gap: 8px;">
                            <button class="btn btn-secondary w-full" onclick="showToast('ç›®å½•å·²é‡ç½®')">é‡ç½®ç›®å½•æ ‘</button>
                            <button class="btn btn-secondary w-full" onclick="confirmResetDeviceData()"
                                style="color: var(--danger); border-color: var(--border-color);">ä¸€é”®é‡ç½®è®¾å¤‡æ•°æ®</button>
                        </div>
                    </div>

                    <!-- List Content -->
                    <div class="content-panel">
                        <!-- Filters -->
                        <div class="filter-bar">
                            <div style="flex: 1; max-width: 240px;">
                                <label class="input-label">æœç´¢è®¾å¤‡</label>
                                <input type="text" class="glass-input" placeholder="åç§°/å¹³å°ç¼–ç /é€šé“ç¼–ç /å…±äº«ç¼–ç ">
                            </div>
                            <div style="flex: 1; max-width: 140px;">
                                <label class="input-label">åœ¨çº¿çŠ¶æ€</label>
                                <select class="glass-input">
                                    <option>å…¨éƒ¨</option>
                                    <option>åœ¨çº¿</option>
                                    <option>ç¦»çº¿</option>
                                </select>
                            </div>
                            <div style="flex: 1; max-width: 160px;">
                                <label class="input-label">ä¸‹çº§å¹³å°</label>
                                <select class="glass-input">
                                    <option>å…¨éƒ¨</option>
                                    <option>çœæ•™è‚²å…ç›‘ç®¡å¹³å°</option>
                                    <option>å¸‚å…¬å®‰å±€æ±‡èšå¹³å°</option>
                                </select>
                            </div>
                            <div style="flex: 1; max-width: 120px;">
                                <label class="input-label">æœ‰æ— åæ ‡</label>
                                <select class="glass-input">
                                    <option>å…¨éƒ¨</option>
                                    <option>æœ‰</option>
                                    <option>æ— </option>
                                </select>
                            </div>
                            <div style="display: flex; align-items: flex-end; gap: 8px;">
                                <button class="btn btn-primary" onclick="searchData()">æŸ¥è¯¢</button>
                                <button class="btn btn-secondary">é‡ç½®</button>
                            </div>
                            <div
                                style="flex: 1; display: flex; justify-content: flex-end; align-items: flex-end; gap: 8px;">
                                <button class="btn btn-secondary">ğŸ“¥ å¯¼å‡º</button>
                            </div>
                        </div>

                        <!-- Table -->
                        <div class="glass-panel" style="overflow-x: auto;">
                            <table class="data-table" style="min-width: 1200px;">
                                <thead>
                                    <tr>
                                        <th style="width: 200px;">è®¾å¤‡åç§°</th>
                                        <th>å½’å±ç»„ç»‡</th>
                                        <th>å½’å±ç»„ç»‡ç¼–ç </th>
                                        <th>ä¸‹çº§å¹³å°</th>
                                        <th>å¹³å°ç¼–ç /è®¾å¤‡æ ‡è¯†</th>
                                        <th>é€šé“ç¼–ç </th>
                                        <th>å…±äº«ç¼–ç </th>
                                        <th>æ“ä½œ</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td title="IoT-ç¯å¢ƒä¼ æ„Ÿå™¨-01">
                                            <div class="device-name-cell text-truncate" style="max-width: 180px;">
                                                <span class="device-icon">ğŸŒ¡ï¸</span>
                                                IoT-ç¯å¢ƒä¼ æ„Ÿå™¨-01
                                            </div>
                                        </td>
                                        <td>ç‰©è”ç½‘è®¾å¤‡</td>
                                        <td>ORG_IOT_001</td>
                                        <td>-</td>
                                        <td>SN:IOT20260206001</td>
                                        <td>-</td>
                                        <td>-</td>
                                        <td>
                                            <button class="btn btn-secondary" style="padding: 4px 8px; font-size: 12px;"
                                                onclick="openDetailModal()">è¯¦æƒ…</button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td title="æ•™å­¦æ¥¼A-1F-å¤§å…å…¨æ™¯">
                                            <div class="device-name-cell text-truncate" style="max-width: 180px;">
                                                <span class="device-icon">ğŸ“¹</span>
                                                æ•™å­¦æ¥¼A-1F-å¤§å…å…¨æ™¯
                                            </div>
                                        </td>
                                        <td>ä¸€æ¥¼å¤§å…</td>
                                        <td>ORG001001</td>
                                        <td>çœæ•™è‚²å…ç›‘ç®¡å¹³å°</td>
                                        <td>33070200001310000001</td>
                                        <td>33070200001310000001</td>
                                        <td>34020000013100000001</td>
                                        <td>
                                            <button class="btn btn-secondary" style="padding: 4px 8px; font-size: 12px;"
                                                onclick="openDetailModal()">è¯¦æƒ…</button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td title="æ•™å­¦æ¥¼A-1F-ä¸œé—¨çƒæœº (ç‰¹åˆ«é•¿çš„ä¸€æ®µåå­—æµ‹è¯•ç”¨)">
                                            <div class="device-name-cell text-truncate" style="max-width: 180px;">
                                                <span class="device-icon">ğŸ“¹</span>
                                                æ•™å­¦æ¥¼A-1F-ä¸œé—¨çƒæœº (ç‰¹åˆ«é•¿çš„ä¸€æ®µåå­—æµ‹è¯•ç”¨)
                                            </div>
                                        </td>
                                        <td>ä¸€æ¥¼å¤§å…</td>
                                        <td>ORG001001</td>
                                        <td>çœæ•™è‚²å…ç›‘ç®¡å¹³å°</td>
                                        <td>33070200001310000002</td>
                                        <td>33070200001310000002</td>
                                        <td>34020000013100000002</td>
                                        <td>
                                            <button class="btn btn-secondary" style="padding: 4px 8px; font-size: 12px;"
                                                onclick="openDetailModal()">è¯¦æƒ…</button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td title="å›¾ä¹¦é¦†-æ­£é—¨äººè„¸æŠ“æ‹">
                                            <div class="device-name-cell text-truncate" style="max-width: 180px;">
                                                <span class="device-icon">ğŸ“·</span>
                                                å›¾ä¹¦é¦†-æ­£é—¨äººè„¸æŠ“æ‹
                                            </div>
                                        </td>
                                        <td>å›¾ä¹¦é¦†</td>
                                        <td>ORG002005</td>
                                        <td>å¸‚å…¬å®‰å±€æ±‡èšå¹³å°</td>
                                        <td>33070200001310000035</td>
                                        <td>33070200001310000035</td>
                                        <td>34020000013100000035</td>
                                        <td>
                                            <button class="btn btn-secondary" style="padding: 4px 8px; font-size: 12px;"
                                                onclick="openDetailModal()">è¯¦æƒ…</button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <!-- Details Modal Label Update -->
                        <div class="section-container" style="margin-bottom: 24px; display: none;">
                            <!-- Hidden template for update logic reference -->
                            <label class="input-label">å¹³å°ç¼–ç /è®¾å¤‡æ ‡è¯†</label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal needs direct update -->

    <!-- Detail Modal -->
    <div class="modal-overlay" id="detailModal">
        <div class="modal-content"
            style="width: 1000px; max-height: 90vh; display: flex; flex-direction: column; padding: 0;">
            <div class="modal-header"
                style="padding: 16px 24px; display: flex; justify-content: space-between; align-items: center;">
                <h3 class="modal-title">è®¾å¤‡è¯¦æƒ…</h3>
                <button class="modal-close" onclick="closeModal()">Ã—</button>
            </div>
            <div class="modal-body" style="padding: 24px; overflow-y: auto; background-color: #f8fafc;">

                <!-- Section 1: Basic Information (Read-only) -->
                <div class="section-container" style="margin-bottom: 24px;">
                    <h4 class="section-title">åŸºç¡€ä¿¡æ¯</h4>
                    <div class="info-grid readonly-grid">
                        <div class="input-group">
                            <label class="input-label">è®¾å¤‡åŸå§‹åç§°</label>
                            <div class="readonly-value">å¤§åæªæœºé€šé“</div>
                        </div>
                        <div class="input-group">
                            <label class="input-label">å¹³å°åç§°</label>
                            <div class="readonly-value">æ­¦æ±‰å¤§åæªæœº</div>
                        </div>
                        <div class="input-group">
                            <label class="input-label">å¹³å°ç¼–ç /è®¾å¤‡æ ‡è¯†</label>
                            <div class="readonly-value">99080300001320000005</div>
                        </div>

                        <div class="input-group">
                            <label class="input-label">é€šé“ç¼–ç </label>
                            <div class="readonly-value">99080300001310000501</div>
                        </div>
                        <div class="input-group">
                            <label class="input-label">å…±äº«ç¼–ç </label>
                            <div class="readonly-value">34020000013100000034</div>
                        </div>
                        <div class="input-group">
                            <label class="input-label">è§†é¢‘é€šé“ç¼–ç </label>
                            <div class="readonly-value">33070200001310000502</div>
                        </div>

                        <div class="input-group">
                            <label class="input-label">è®¾å¤‡ç±»å‹</label>
                            <div class="readonly-value">æªæœº</div>
                        </div>
                        <div class="input-group">
                            <label class="input-label">è®¾å¤‡å‚å•†</label>
                            <div class="readonly-value">å¤§å (Dahua)</div>
                        </div>
                        <div class="input-group">
                            <label class="input-label">è”ç½‘å±æ€§</label>
                            <div class="readonly-value">ç›´è¿è®¾å¤‡</div>
                        </div>

                        <div class="input-group">
                            <label class="input-label">åŸå§‹ç»åº¦</label>
                            <div class="readonly-value">--</div>
                        </div>
                        <div class="input-group">
                            <label class="input-label">åŸå§‹çº¬åº¦</label>
                            <div class="readonly-value">--</div>
                        </div>
                        <div class="input-group">
                            <label class="input-label">åœ¨çº¿çŠ¶æ€</label>
                            <div class="readonly-value">åœ¨çº¿</div>
                        </div>

                        <div class="input-group">
                            <label class="input-label">åº”ç”¨åœºæ™¯</label>
                            <div class="readonly-value">æ²»å®‰</div>
                        </div>
                        <div class="input-group">
                            <label class="input-label">ç›‘æ§æ–¹ä½</label>
                            <div class="readonly-value">ä¸œå‘</div>
                        </div>
                        <div class="input-group">
                            <label class="input-label">å®¤å†…/å®¤å¤–</label>
                            <div class="readonly-value">å®¤å†…</div>
                        </div>

                        <div class="input-group">
                            <label class="input-label">ä¸Šçº§å¹³å°</label>
                            <div class="readonly-value">--</div>
                        </div>
                        <div class="input-group">
                            <label class="input-label">ç®¡ç†å•ä½</label>
                            <div class="readonly-value">é‡‘åç†å·¥ä¿å«å¤„</div>
                        </div>
                        <div class="input-group">
                            <label class="input-label">èƒ½åŠ›ç­‰çº§</label>
                            <div class="readonly-value">5çº§</div>
                        </div>

                        <div class="input-group" style="grid-column: span 3;">
                            <label class="input-label">è¡Œæ”¿åŒºåˆ’</label>
                            <div class="readonly-value">æµ™æ±Ÿçœ / é‡‘åå¸‚ / å©ºåŸåŒº</div>
                        </div>

                        <div class="input-group" style="grid-column: span 3;">
                            <label class="input-label">è¯¦ç»†åœ°å€</label>
                            <div class="readonly-value">é‡‘åå¸‚å©ºåŸåŒºç¯åŸå—è·¯99å·é‡‘åç†å·¥å­¦é™¢æ•™å­¦æ¥¼AåŒº1æ¥¼</div>
                        </div>

                        <div class="input-group" style="grid-column: span 3;">
                            <label class="input-label">æ³¨å†Œåº”ç”¨</label>
                            <div class="readonly-value tags-container">
                                <span class="app-tag">æ™ºæ…§ç¤¾åŒº</span>
                                <span class="app-tag">æ™ºæ…§å®‰æ£€ä¸€ä½“</span>
                                <span class="app-tag">å¤§æ•°æ®ç»„åº”ç”¨</span>
                                <span class="app-tag">+ 3 ...</span>
                            </div>
                        </div>

                        <div class="input-group" style="grid-column: span 3;">
                            <label class="input-label">è®¾å¤‡æ ‡ç­¾</label>
                            <div class="readonly-value">é‡ç‚¹åŒºåŸŸ, å®¤å†…, äººæµå¯†é›†</div>
                        </div>
                    </div>
                </div>

                <!-- Section 2: Management Information (Editable) -->
                <div class="section-container bg-white"
                    style="padding: 20px; border-radius: 8px; box-shadow: 0 1px 3px rgba(0,0,0,0.05);">
                    <div
                        style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h4 class="section-title" style="margin:0">ç®¡ç†ä¿¡æ¯</h4>
                    </div>

                    <form id="manageForm" class="view-mode">
                        <div class="info-grid editable-grid">

                            <!-- Name Row -->
                            <div class="input-group">
                                <label class="input-label"><span style="color:red">*</span>
                                    è®¾å¤‡åç§°</label>
                                <div class="input-wrapper">
                                    <input type="text" class="form-input" value="å…«æ¥¼å¤§åæªæœº" id="cameraName" disabled>
                                    <div class="input-actions">
                                        <i class="icon-close" onclick="clearInput('cameraName')">Ã—</i>
                                        <i class="icon-reset" onclick="resetInput('cameraName', 'å…«æ¥¼å¤§åæªæœº')">â†º</i>
                                    </div>
                                </div>
                            </div>
                            <div class="input-group">
                                <label class="input-label">ç»åº¦</label>
                                <div class="input-wrapper">
                                    <input type="number" step="0.000001" class="form-input" value="117.052867"
                                        id="longitude" disabled>
                                    <div class="input-actions">
                                        <i class="icon-close" onclick="clearInput('longitude')">Ã—</i>
                                        <i class="icon-reset" onclick="resetInput('longitude', '117.052867')">â†º</i>
                                    </div>
                                </div>
                            </div>
                            <div class="input-group">
                                <label class="input-label">çº¬åº¦</label>
                                <div class="input-wrapper">
                                    <input type="number" step="0.000001" class="form-input" value="39.242255"
                                        id="latitude" disabled>
                                    <div class="input-actions">
                                        <i class="icon-close" onclick="clearInput('latitude')">Ã—</i>
                                        <i class="icon-reset" onclick="resetInput('latitude', '39.242255')">â†º</i>
                                    </div>
                                </div>
                            </div>

                            <!-- Row 2: Selects -->
                            <div class="input-group">
                                <label class="input-label">æªçƒæœº</label>
                                <div class="input-wrapper">
                                    <select class="form-select" disabled>
                                        <option value="">è¯·é€‰æ‹©æªçƒæœº</option>
                                        <option value="1">æªæœº</option>
                                        <option value="2">çƒæœº</option>
                                    </select>
                                    <div class="input-actions">
                                        <i class="icon-reset" onclick="showToast('å·²é‡ç½®')">â†º</i>
                                    </div>
                                </div>
                            </div>
                            <div class="input-group">
                                <label class="input-label">è®¾å¤‡å‚å•†</label>
                                <div class="input-wrapper">
                                    <select class="form-select" disabled>
                                        <option value="">è¯·é€‰æ‹©è®¾å¤‡å‚å•†</option>
                                        <option value="dahua">å¤§å</option>
                                        <option value="hikvision">æµ·åº·å¨è§†</option>
                                    </select>
                                </div>
                            </div>
                            <div class="input-group">
                                <label class="input-label">è”ç½‘å±æ€§</label>
                                <div class="input-wrapper">
                                    <select class="form-select" disabled>
                                        <option value="">è¯·é€‰æ‹©è”ç½‘å±æ€§</option>
                                        <option value="1">ç›´è¿</option>
                                        <option value="2">å¹³å°æ¥å…¥</option>
                                    </select>
                                </div>
                            </div>

                            <!-- Row 3: Admin Division -->
                            <div class="input-group" style="grid-column: span 3;">
                                <label class="input-label">è¡Œæ”¿åŒºåˆ’</label>
                                <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px;">
                                    <select class="form-select" disabled>
                                        <option value="">è¯·é€‰æ‹©çœ</option>
                                        <option value="330000">æµ™æ±Ÿçœ</option>
                                    </select>
                                    <select class="form-select" disabled>
                                        <option value="">è¯·é€‰æ‹©å¸‚</option>
                                        <option value="330700">é‡‘åå¸‚</option>
                                    </select>
                                    <select class="form-select" disabled>
                                        <option value="">è¯·é€‰æ‹©å¿</option>
                                        <option value="330702">å©ºåŸåŒº</option>
                                    </select>
                                    <select class="form-select" disabled>
                                        <option value="">è¯·é€‰æ‹©é•‡</option>
                                        <option value="">--</option>
                                    </select>
                                </div>
                            </div>

                            <!-- Row 4: Place Type, Management Unit, Capability Level -->
                            <div class="input-group">
                                <label class="input-label">åœºæ‰€ç±»å‹</label>
                                <div class="input-wrapper">
                                    <select class="form-select" disabled>
                                        <option value="">è¯·é€‰æ‹©åœºæ‰€ç±»å‹</option>
                                        <option value="public">å…¬å…±åœºæ‰€</option>
                                        <option value="road">é“è·¯å¡å£</option>
                                        <option value="school">æ ¡å›­å®‰å…¨</option>
                                    </select>
                                </div>
                            </div>
                            <div class="input-group">
                                <label class="input-label">ç®¡ç†å•ä½</label>
                                <div class="input-wrapper">
                                    <select class="form-select" disabled>
                                        <option value="">è¯·é€‰æ‹©ç®¡ç†å•ä½</option>
                                        <option value="dept1">ä¿å«å¤„</option>
                                        <option value="dept2">è¡Œæ”¿éƒ¨</option>
                                    </select>
                                </div>
                            </div>
                            <div class="input-group">
                                <label class="input-label">èƒ½åŠ›çº§åˆ«</label>
                                <div class="input-wrapper">
                                    <select class="form-select" disabled>
                                        <option value="">è¯·é€‰æ‹©èƒ½åŠ›çº§åˆ«</option>
                                        <option value="1">1çº§</option>
                                        <option value="2">2çº§</option>
                                        <option value="3">3çº§</option>
                                        <option value="4">4çº§</option>
                                        <option value="5" selected>5çº§</option>
                                    </select>
                                </div>
                            </div>

                            <!-- Row 5: Monitoring Direction, Indoor/Outdoor, Theme -->
                            <div class="input-group">
                                <label class="input-label">ç›‘æ§æ–¹å‘</label>
                                <div class="input-wrapper">
                                    <select class="form-select" disabled>
                                        <option value="">è¯·é€‰æ‹©ç›‘æ§æ–¹å‘</option>
                                        <option value="E" selected>ä¸œ</option>
                                        <option value="S">å—</option>
                                        <option value="W">è¥¿</option>
                                        <option value="N">åŒ—</option>
                                    </select>
                                </div>
                            </div>
                            <div class="input-group">
                                <label class="input-label">å®¤å†…å¤–</label>
                                <div class="input-wrapper">
                                    <select class="form-select" disabled>
                                        <option value="">è¯·é€‰æ‹©å®¤å†…å¤–</option>
                                        <option value="indoor" selected>å®¤å†…</option>
                                        <option value="outdoor">å®¤å¤–</option>
                                    </select>
                                </div>
                            </div>
                            <div class="input-group">
                                <label class="input-label">ä¸»é¢˜åˆ†ç±»</label>
                                <div class="input-wrapper">
                                    <select class="form-select" disabled>
                                        <option value="">è¯·é€‰æ‹©ä¸»é¢˜åˆ†ç±»</option>
                                        <option value="security">æ²»å®‰é˜²æ§</option>
                                        <option value="traffic">äº¤é€šç®¡ç†</option>
                                    </select>
                                </div>
                            </div>

                            <!-- Row 6: Geo Region, Eagle Eye -->
                            <div class="input-group">
                                <label class="input-label">åœ°ç†åŒºåŸŸ</label>
                                <div class="input-wrapper">
                                    <select class="form-select" disabled>
                                        <option value="">è¯·é€‰æ‹©åœ°ç†åŒºåŸŸ</option>
                                        <option value="area1">é‡ç‚¹åŒºåŸŸ</option>
                                        <option value="area2">æ™®é€šåŒºåŸŸ</option>
                                    </select>
                                </div>
                            </div>
                            <div class="input-group">
                                <label class="input-label">æ˜¯å¦é¹°çœ¼è®¾å¤‡</label>
                                <div class="input-wrapper">
                                    <select class="form-select" disabled>
                                        <option value="">è¯·é€‰æ‹©</option>
                                        <option value="0" selected>éé¹°çœ¼è®¾å¤‡</option>
                                        <option value="1">æ˜¯</option>
                                    </select>
                                </div>
                            </div>
                            <div class="input-group"></div> <!-- Spacer -->

                            <!-- Address -->
                            <div class="input-group" style="grid-column: span 3;">
                                <label class="input-label">å®‰è£…åœ°å€</label>
                                <div class="input-wrapper">
                                    <input type="text" class="form-input" placeholder="è¯·è¾“å…¥è¯¦ç»†åœ°å€" id="installAddress"
                                        disabled>
                                    <div class="input-actions">
                                        <i class="icon-close" onclick="clearInput('installAddress')">Ã—</i>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </form>
                </div>
            </div>

            <div class="modal-footer"
                style="padding: 16px 24px; border-top: 1px solid #e2e8f0; background: white; text-align: right;">
                <div id="viewFooter">
                    <button class="btn btn-secondary" onclick="closeModal()">å…³é—­</button>
                    <button class="btn btn-primary" onclick="toggleEditMode(true)"
                        style="margin-left: 12px;">ç¼–è¾‘</button>
                </div>
                <div id="editFooter" style="display: none;">
                    <button class="btn btn-secondary" onclick="toggleEditMode(false)">å–æ¶ˆ</button>
                    <button class="btn btn-primary" onclick="saveDetail()" style="margin-left: 12px;">ä¿å­˜</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Confirm Reset Modal (New) -->
    <div class="modal-overlay" id="confirmDataResetModal">
        <div class="modal-content" style="width: 450px;">
            <div class="modal-header">
                <h3 class="modal-title">âš ï¸ é‡ç½®è®¾å¤‡æ•°æ®</h3>
                <button class="modal-close" onclick="closeConfirmResetDeviceData()">Ã—</button>
            </div>
            <div class="modal-body">
                <p style="color: var(--text-main); margin-bottom: 12px; font-weight: 500;">
                    ç¡®å®šè¦é‡ç½®ã€ä¸€é”®é‡ç½®ã€‘ç»„ç»‡ä¸‹çš„è®¾å¤‡æ•°æ®å—ï¼Ÿ
                </p>
                <div
                    style="background: #fff1f2; color: #b91c1c; padding: 12px; border-radius: 4px; font-size: 13px; line-height: 1.6;">
                    é‡ç½®åï¼Œæ‚¨æ‰‹åŠ¨ä¿®æ”¹çš„è®¾å¤‡åç§°ã€ç»çº¬åº¦ä¿¡æ¯å°†ä¸¢å¤±ï¼Œå¹¶æ¢å¤ä¸ºä¸‹çº§å¹³å°æ¨é€çš„åŸå§‹æ•°æ®ï¼Œä¸”æ— æ³•æ¢å¤ã€‚
                </div>
                <div style="margin-top: 16px; font-size: 13px; color: var(--text-secondary);">
                    é¢„è®¡å½±å“ <strong>126</strong> ä¸ªè®¾å¤‡
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeConfirmResetDeviceData()">å–æ¶ˆ</button>
                <button class="btn btn-primary" onclick="executeDataReset()">ç¡®å®šé‡ç½®</button>
            </div>
        </div>
    </div>

    <style>
        /* New Modal Styles */
        .section-title {
            font-size: 16px;
            font-weight: 600;
            color: #334155;
            margin-top: 0;
            margin-bottom: 16px;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px 24px;
        }

        .readonly-value {
            color: #64748b;
            font-size: 14px;
            padding: 8px 12px;
            background: #f1f5f9;
            border-radius: 4px;
            border: 1px solid transparent;
            /* Match input height */
            min-height: 38px;
            display: flex;
            /* Vertically center text */
            align-items: center;
        }

        .section-container.bg-white {
            background: white;
            border: 1px solid #e2e8f0;
        }

        .form-input,
        .form-select {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #e2e8f0;
            border-radius: 4px;
            font-size: 14px;
            height: 38px;
            outline: none;
            transition: border-color 0.2s;
        }

        .form-input:focus,
        .form-select:focus {
            border-color: var(--primary);
        }

        .input-wrapper {
            position: relative;
        }

        /* Show delete/reset icons inside input */
        .input-actions {
            position: absolute;
            right: 8px;
            top: 50%;
            transform: translateY(-50%);
            display: none;
            /* Hidden by default */
            gap: 6px;
            color: #94a3b8;
        }

        /* Show actions when editing */
        .is-editing .input-actions {
            display: flex;
        }

        .input-actions i {
            cursor: pointer;
            font-style: normal;
        }

        .input-actions i:hover {
            color: var(--primary);
        }

        /* Disabled input styling to look cleaner in view mode */
        .form-input[disabled],
        .form-select[disabled] {
            background-color: #f8fafc;
            color: #64748b;
            cursor: default;
            border-color: transparent;
        }

        .app-tag {
            display: inline-block;
            background: #e2e8f0;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 12px;
            margin-right: 4px;
            margin-bottom: 4px;
            color: #475569;
        }
    </style>

    <script src="script.js"></script>
    <script>
        function searchData() {
            showToast('æ•°æ®å·²åˆ·æ–°');
        }

        function openDetailModal() {
            toggleEditMode(false); // Reset to view mode
            document.getElementById('detailModal').classList.add('active');
        }

        function closeModal() {
            document.getElementById('detailModal').classList.remove('active');
        }

        function toggleEditMode(isEdit) {
            const form = document.getElementById('manageForm');
            const viewFooter = document.getElementById('viewFooter');
            const editFooter = document.getElementById('editFooter');

            if (isEdit) {
                form.classList.add('is-editing');
                viewFooter.style.display = 'none';
                editFooter.style.display = 'block';

                // Enable inputs
                const inputs = form.querySelectorAll('input, select');
                inputs.forEach(el => el.removeAttribute('disabled'));
            } else {
                form.classList.remove('is-editing');
                viewFooter.style.display = 'block';
                editFooter.style.display = 'none';

                // Disable inputs
                const inputs = form.querySelectorAll('input, select');
                inputs.forEach(el => el.setAttribute('disabled', 'true'));
            }
        }

        function clearInput(id) {
            document.getElementById(id).value = '';
        }

        function resetInput(id, val) {
            document.getElementById(id).value = val;
            showToast('å·²é‡ç½®');
        }

        function saveDetail() {
            // Validation logic
            const lat = document.getElementById('latitude').value;
            const lng = document.getElementById('longitude').value;

            if (lat && (lat < -90 || lat > 90)) {
                showToast('çº¬åº¦å¿…é¡»åœ¨ -90 åˆ° 90 ä¹‹é—´', 'warning');
                return;
            }
            if (lng && (lng < -180 || lng > 180)) {
                showToast('ç»åº¦å¿…é¡»åœ¨ -180 åˆ° 180 ä¹‹é—´', 'warning');
                return;
            }

            // Close and show success
            closeModal();
            showToast('è®¾å¤‡ä¿¡æ¯æ›´æ–°æˆåŠŸ', 'success');
        }

        // New Confirmation Modal Logic
        function confirmResetDeviceData() {
            document.getElementById('confirmDataResetModal').classList.add('active');
        }

        function closeConfirmResetDeviceData() {
            document.getElementById('confirmDataResetModal').classList.remove('active');
        }

        function executeDataReset() {
            closeConfirmResetDeviceData();
            showToast('è®¾å¤‡æ•°æ®é‡ç½®æˆåŠŸ', 'success');
        }
    </script>
</body>

</html>